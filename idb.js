(function(g){var DB='mint_v60_db';var STORE='kv';function openDB(){return new Promise((res,rej)=>{var r=indexedDB.open(DB,1);r.onupgradeneeded=e=>{var db=e.target.result;if(!db.objectStoreNames.contains(STORE))db.createObjectStore(STORE)};r.onsuccess=()=>res(r.result);r.onerror=()=>rej(r.error)});}function withStore(m,fn){return openDB().then(db=>new Promise((res,rej)=>{var tx=db.transaction(STORE,m);var st=tx.objectStore(STORE);var out;try{out=fn(st);}catch(e){rej(e);return}tx.oncomplete=()=>res(out);tx.onerror=()=>rej(tx.error)}))}function get(k){return withStore('readonly',st=>new Promise((res,rej)=>{var r=st.get(k);r.onsuccess=()=>res(r.result);r.onerror=()=>rej(r.error)}))}function set(k,v){return withStore('readwrite',st=>new Promise((res,rej)=>{var r=st.put(v,k);r.onsuccess=()=>res();r.onerror=()=>rej(r.error)}))}function getJSON(k,f){return get(k).then(v=>{if(typeof v==='string'){try{return JSON.parse(v)}catch(e){return f}}return v===undefined?f:v})}function setJSON(k,o){return set(k,JSON.stringify(o))}g.mintIDB={get,set,getJSON,setJSON}})(this)